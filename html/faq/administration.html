


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running a Traffic Control CDN &mdash; Traffic Control 3.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Glossary" href="../glossary.html" />
    <link rel="prev" title="Development" href="development.html" />
    <link href="../_static/theme_overrides.css" rel="stylesheet" type="text/css"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Traffic Control
          

          
            
            <img src="../_static/ATC-SVG-FULL-WHITE.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">CDN Basics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Traffic Control Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator’s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer’s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">APIs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">FAQ</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running a Traffic Control CDN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cache-group">Cache Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#profile">Profile</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#why-is-my-crconfig-json-rejected">Why is my CRConfig.json rejected?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Traffic Control</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">FAQ</a> &raquo;</li>
        
      <li>Running a Traffic Control CDN</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/faq/administration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-a-traffic-control-cdn">
<h1>Running a Traffic Control CDN<a class="headerlink" href="#running-a-traffic-control-cdn" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cache-group">
<span id="cachegroup"></span><h2>Cache Group<a class="headerlink" href="#cache-group" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A cache group is a logical group of caches that Traffic Router tries to use as a combined cache. Traffic Router treats all servers in a cache group as though they are in the same physical location, though they are in fact only in the same region (network). A cache group has one single set of geographical coordinates even if the caches that make up the cache group are in different physical locations. The caches in a cache group are not aware of the other caches in the group - there is no clustering software or communications between caches in a cache group.</p>
<p>There are two types of cache groups: EDGE and MID. Traffic Control is a two tier system, where the clients get directed to the EDGE cache group. On cache miss, the cache in the EDGE cache group obtains content from a MID cache group, rather than the origin, which is shared with multiple EDGEs. EDGE cache groups are configured to have one single parent cache group.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Often the EDGE to MID relationship is based on network distance, and does not necessarily match the geographic distance.</p>
</div>
<p>A cache group serves a particular part of the network as defined in the coverage zone file. See <a class="reference internal" href="../admin/traffic_ops/using.html#asn-czf"><span class="std std-ref">The Coverage Zone File and ASN Table</span></a>.</p>
<p>Consider the example CDN below:</p>
<img alt="../_images/cache_groups_1.png" class="align-center" src="../_images/cache_groups_1.png" />
<p>There are two MID tier cache groups, each assigned with three EDGEs. The lax, den and chi EDGE locations are configured with the West MID as their parent, and the nyc, phl, and hou EDGEs, are configured with the East MID as their parent. On a cache miss, the EDGEs use their assigned parent.</p>
</div></blockquote>
<p>All caches (and other servers) are assigned a Profile in Traffic Ops.</p>
</div>
<div class="section" id="profile">
<span id="id1"></span><h2>Profile<a class="headerlink" href="#profile" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A Profile is a set of configuration settings and parameters, applied to a server or deliveryservice. For a typical cache there are hundreds of configuration settings to apply. The Traffic Ops parameter view contains the defined settings, and bundled into groups using Profiles. Traffic Ops allows for duplication, comparison, import and export of Profiles.</p>
</div></blockquote>
<div class="section" id="why-is-my-crconfig-json-rejected">
<h3>Why is my CRConfig.json rejected?<a class="headerlink" href="#why-is-my-crconfig-json-rejected" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Especially in version 1.1.0, there’s a number of manual steps that need to be done after the initial install. Make sure that after the initial install, you perform these steps in order:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even though Traffic Ops allows you to enter the servers with no IPv6 address information, the CRConfig will not be accepted by Traffic Router without IPv6 address information for at least Traffic Router and Traffic Monitor. Traffic Control assumes in a lot of places that all servers have at least an IPv4 and an IPv6 address. If you are not using IPv6, it is best to enter dummy addresses for all server types, and turn IPv6 off in all delivery services. (<a class="reference external" href="https://github.com/Comcast/traffic_control/issues/44">https://github.com/Comcast/traffic_control/issues/44</a>).</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Add users</dt><dd><p>Not necessarily needed for getting your CRConfig accepted, but always a good idea.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Divisions</dt><dd><p>You will need at least one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Regions</dt><dd><p>You will need at least one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Physical Locations</dt><dd><p>You will need at least one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Mid tier Cache Groups</dt><dd><p>You will need at least one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Edge tier Cache Groups</dt><dd><p>You will need at least one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Traffic Monitors</dt><dd><p>You will need to enter at least one Traffic Monitor - make sure to change the server status to <em>ONLINE</em>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Traffic Routers</dt><dd><p>You will need to enter at least one Traffic Router - make sure to change the server status to <em>ONLINE</em>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Edges</dt><dd><p>You will need at least one edge cache to make Traffic Router accept the CRConfig.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Mid</dt><dd><p>Technically you don’t need a mid tier, but if you have one, best to enter the info before continuing.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Change the <code class="docutils literal notranslate"><span class="pre">polling.url</span></code> parameters to reflect your CDN</dt><dd><p>Set where to get the coverage zone map, and the geo IP database.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Create at least one delivery service, and assign at least one edge cache in REPORTED state to it.</dt><dd><p>Even if it is a dummy DS, without a single DS, the CRConfig will not be accepted by Traffic Router.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Snapshot CRConfig</dt><dd><p><strong>Tools &gt; Snapshot CRConfig</strong> diff, and write.</p>
</dd>
</dl>
</li>
</ul>
<p>Now you are ready to install the sw on Traffic Monitor and then Traffic Router.</p>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development.html" class="btn btn-neutral float-left" title="Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Apache Traffic Control

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>